/* Sina Extension for Elementor v3.7.4 */
!function(l){"use strict";({instance:[],templateId:0,init:function(){this.renderPopup(),l("#sina-ext-hf-s-display-type").select2({ajax:{url:ajaxurl,dataType:"json",method:"post",delay:200,data:function(e){return{q:e.term,page:e.page,action:"sina_ext_get_posts_by_query",nonce:Sina_Ext_Theme_Builder.nonce}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:2}),l("body.post-type-sina-ext-template #wpcontent").on("click",".page-title-action, .row-title, .row-actions .edit > a",this.openPopup),l(document).on("click",".sina-ext-body-overlay,.sina-ext-template-edit-cross",this.closePopup).on("click",".sina-ext-tmp-save",this.savePost).on("click",".sina-ext-tmp-elementor",this.redirectEditPage).on("sina_ext_template_edit_popup_open",this.displayLocation).on("change","#sina-ext-template-type, #sina-ext-hf-display-type",this.displayLocation)},renderPopup:function(e){var t=wp.template("sina-ext-cpt-popup")({templatetype:Sina_Ext_Theme_Builder.templatetype,hflocation:Sina_Ext_Theme_Builder.hflocation,archivelocation:Sina_Ext_Theme_Builder.archivelocation,singlelocation:Sina_Ext_Theme_Builder.singlelocation,otherslocation:Sina_Ext_Theme_Builder.otherslocation,editor:Sina_Ext_Theme_Builder.editor,heading:Sina_Ext_Theme_Builder.labels});l("body").append(t)},openPopup:function(e){e.preventDefault();var t=l(this).closest("tr").attr("id"),a=null,e=null;t&&(e="post.php?post="+(a=t.replace("post-",""))+"&action=elementor"),l(".sina-ext-tmp-save").attr("data-tmpid",a),l(".sina-ext-tmp-elementor").attr({"data-link":e,"data-tmpid":a}),a?l.ajax({url:Sina_Ext_Theme_Builder.ajaxurl,data:{action:"sina_ext_get_template",nonce:Sina_Ext_Theme_Builder.nonce,tmpId:a},type:"POST",beforeSend:function(){l(".sina-ext-loader").fadeIn(300)},success:function(e){document.querySelector("#sina-ext-template-type option[value='"+e.data.tmpType+"']").selected="true",l("#sina-ext-template-title").attr("value",e.data.tmpTitle),l(".sina-ext-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")},complete:function(e){l(document).trigger("sina_ext_template_edit_popup_open"),l(".hf-location:visible select, .archive-location:visible select, .single-location:visible select, .others-location:visible select").find("option[value='"+e.responseJSON.data.tmpLocation+"']")[0].selected="true",e.responseJSON.data.tmpSpLocation&&l.each(e.responseJSON.data.tmpSpLocation,function(e,t){t={id:e,text:t},t=new Option(t.text,t.id,!0,!0),l("#sina-ext-hf-s-display-type").append(t).trigger("change")}),l(".sina-ext-template-edit-popup-area").addClass("open-popup"),l(".sina-ext-loader").fadeOut(300)},error:function(e){console.log(e)}}):(l(document).trigger("sina_ext_template_edit_popup_open"),l(".sina-ext-tmp-elementor").addClass("button disabled").attr("disabled","disabled"),l(".sina-ext-template-edit-popup-area").addClass("open-popup"))},closePopup:function(e){l(".sina-ext-template-edit-popup-area").removeClass("open-popup")},savePost:function(e){var t=l(this),s=e.target.dataset.tmpid||"",a=l("#sina-ext-template-title").val(),i=l("#sina-ext-template-type").val(),n=l(".hf-location:visible select, .archive-location:visible select, .single-location:visible select, .others-location:visible select").val(),e=l(".hf-s-location:visible select").val();l.ajax({url:Sina_Ext_Theme_Builder.ajaxurl,data:{action:"sina_ext_save_template",nonce:Sina_Ext_Theme_Builder.nonce,tmpId:s,title:a,tmpType:i,tmpDisplay:n,specificsDisplay:null!==(e=JSON.stringify(e))&&void 0!==e?e:null},type:"POST",beforeSend:function(){t.text(Sina_Ext_Theme_Builder.labels.buttons.save.saving),t.addClass("updating-message")},success:function(e){var t,a=e.data.id,i=l("#post-"+a),n=l("#sina-ext-template-title").val(),o=l("#sina-ext-template-type").val(),e=l("#sina-ext-others-display-type").val();""==s&&(a&&(t="post.php?post="+a+"&action=elementor"),l(".sina-ext-tmp-save").attr("data-tmpid",a),l(".sina-ext-tmp-elementor").attr({"data-link":t,"data-tmpid":a}),l(".sina-ext-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")),i.find("a.row-title").text(n),i.find("div.column-type").text(o),"header"==o||"footer"==o?e=l("#sina-ext-hf-display-type").val():"archive"==o?e=l("#sina-ext-archive-display-type").val():"single"==o&&(e=l("#sina-ext-single-display-type").val()),i.find("div.post-status").html("<strong>Display: </strong>"+e)},complete:function(e){t.removeClass("updating-message"),t.text(Sina_Ext_Theme_Builder.labels.buttons.save.saved)},error:function(e){console.log(e)}})},redirectEditPage:function(e){e.preventDefault(),e=(e=l(this)).data("link")?e.data("link"):"",window.location.replace(Sina_Ext_Theme_Builder.adminURL+e)},displayLocation:function(e){var t=l("#sina-ext-template-type").val();l(".hf-s-location").addClass("hidden"),"single"===t?(l(".single-location").removeClass("hidden"),l(".hf-location, .archive-location, .others-location").addClass("hidden")):"archive"===t?(l(".archive-location").removeClass("hidden"),l(".hf-location, .single-location, .others-location").addClass("hidden")):"others"===t?(l(".others-location").removeClass("hidden"),l(".hf-location, .archive-location, .single-location").addClass("hidden")):(l(".hf-location").removeClass("hidden"),l(".archive-location, .single-location, .others-location").addClass("hidden"),setTimeout(function(){"specifics"===l("#sina-ext-hf-display-type").val()&&l(".hf-s-location").removeClass("hidden")},100))}}).init()}(jQuery);